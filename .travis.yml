language: python

before_install:
    - sudo apt-get update -qq
    - wget https://github.com/gohugoio/hugo/releases/download/v0.55.4/hugo_0.55.4_Linux-64bit.deb
    - sudo dpkg -i hugo*.deb
    - pip install Pygments

script:
    - hugo

branches:
    only:
        - gh-pages

deploy:
    provider: pages
    skip-cleanup: true
    github-token: $GITHUB_TOKEN
    keep-history: true
    local-dir: public
    target_branch: master # branch contains static content from Hugo
    on:
        branch: gh-pages  # branch contains source for Hugo
